return function(Window)
    local PlayerTab = Window:CreateTab("Player", "users")
    
    -- Movement Section
    PlayerTab:CreateSection("Movement Settings")

    -- Walkspeed System
    local CurrentWalkspeed = 16
    local WalkspeedEnabled = false

    local function UpdateWalkspeed()
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChildOfClass("Humanoid") then
            character.Humanoid.WalkSpeed = WalkspeedEnabled and CurrentWalkspeed or 16
        end
    end

    PlayerTab:CreateToggle({
        Name = "Enable Walkspeed",
        CurrentValue = WalkspeedEnabled,  -- Initialize with our variable
        Flag = "WalkspeedToggle",
        Callback = function(Value)
            WalkspeedEnabled = Value  -- Store the toggle state in our variable
            UpdateWalkspeed()
        end
    })

    PlayerTab:CreateSlider({
        Name = "Walkspeed Value",
        Range = {16, 200},
        Increment = 1,
        Suffix = "studs/s",
        CurrentValue = CurrentWalkspeed,  -- Initialize with our variable
        Flag = "WalkspeedSlider",
        Callback = function(Value)
            CurrentWalkspeed = Value  -- Store the slider value in our variable
            if WalkspeedEnabled then UpdateWalkspeed() end
        end
    })

    -- Handle character respawns
    game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
        task.wait(0.5) -- Wait for humanoid to load
        if WalkspeedEnabled then UpdateWalkspeed() end
    end)

    -- Initialize on first load
    if game.Players.LocalPlayer.Character then
        task.spawn(function()
            task.wait(0.5)
            if WalkspeedEnabled then UpdateWalkspeed() end
        end)
    end
end
